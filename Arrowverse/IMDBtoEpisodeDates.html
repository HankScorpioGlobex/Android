<!DOCTYPE html>
<html>
<body>

<h2>JavaScript Functions</h2>

<p>This example calls a function which performs a calculation, and returns the result:</p>

<p id="demo"></p>

<script>
function convertMonth(month) {
    month = month.toUpperCase().substring(0, 3);
    switch(month) {
        case "JAN":
            return "01";
        case "FEB":
            return "02";
        case "MAR":
            return "03";
        case "APR":
            return "04";
        case "MAY":
            return "05";
        case "JUN":
            return "06";
        case "JUL":
            return "07";
        case "AUG":
            return "08";
        case "SEP":
            return "09";
        case "OCT":
            return "10";
        case "NOV":
            return "11";
        case "DEC":
            return "12";
        default:
            alert("convertMonth error" + month);
    }
}
function convertDay(day) {
    if(day.length === 1) {
        return "0" + day;
    }
    return day;
}
function myFunction(p1, p2) {
    let episodeText = "  Season 1   The Resurrection S1, Ep1  16 Jan. 2018 The Resurrection   7.7 (1,289)    Rate  A former superhero with the power to control and harness lightning, Jefferson Pierce, otherwise known as Black Lightning, unrolls the secrets of his past to protect his city and his family.  Watch Now   From $1.99 (SD) on Prime Video      LaWanda: The Book of Hope S1, Ep2  23 Jan. 2018 LaWanda: The Book of Hope   7.5 (893)    Rate  A glimmer of hope appears in the community that Black Lightning is back to combat the violence.  Watch Now   From $1.99 (SD) on Prime Video      LaWanda: The Book of Burial S1, Ep3  30 Jan. 2018 LaWanda: The Book of Burial   7.6 (709)    Rate  Anissa starts to come into her own while Jefferson tries to decide if the community can survive without Black Lightning.  Watch Now or On TV   From $1.99 (SD) on Prime Video      Black Jesus S1, Ep4  6 Feb. 2018 Black Jesus   7.4 (620)    Rate  Black Lightning is recruited to rally against The 100 gang. Anissa investigates the new drug hitting the streets. Meanwhile, familiar faces begin to reappear.      And Then the Devil Brought the Plague: The Book of Green Light S1, Ep5  13 Feb. 2018 And Then the Devil Brought the Plague: The Book of Green Light   7.9 (542)    Rate  An unexpected phone call unearths the long-buried need for Jefferson to investigate the murder of his father. Meanwhile, Annisa wrestles with the fact that her actions have dire consequences. Lastly, Jennifer learns the importance of controlling her temper - in all situations.      Three Sevens: The Book of Thunder S1, Ep6  27 Feb. 2018 Three Sevens: The Book of Thunder   7.8 (499)    Rate  Jefferson hunts down his father's killer; Anissa uses her new powers to right a wrong after a failed protest; Jennifer wrestles with difficult choices; Gambi asks Lynn for help.      Equinox: The Book of Fate S1, Ep7  6 Mar. 2018 Equinox: The Book of Fate   8.0 (430)    Rate  Black Lightning's pursuit of Tobias continues; Anissa continues to find herself in the new normal.      The Book of Revelations S1, Ep8  13 Mar. 2018 The Book of Revelations   7.9 (404)    Rate  Black Lightning works with Anissa to help find information to clear Black Lightning's name. Jennifer begins interning for Lynn. Meanwhile, Gambi finds himself in a precarious situation.      The Book of Little Black Lies S1, Ep9  20 Mar. 2018 The Book of Little Black Lies   8.0 (389)    Rate  Following the latest killing, Black Lightning tries to clear his name as he hunts down the person responsible for his father's death, while tensions remain high between him and Gambi.      Sins of the Father: The Book of Redemption S1, Ep10  27 Mar. 2018 Sins of the Father: The Book of Redemption   8.1 (359)    Rate  After the latest killing, Black Lightning works to clear his name and hunt down those involved in the death of his father.      Black Jesus: The Book of Crucifixion S1, Ep11  3 Apr. 2018 Black Jesus: The Book of Crucifixion   8.2 (355)    Rate  As suspicions grow that Jefferson Pierce is Black Lightning, the ASA arranges to have him arrested. Lynn seeks help from Detective Henderson. Meanwhile, with Jefferson in custody, Gambi and Anissa work together to show Black Lightning is still running around the streets of Freeland.      The Resurrection and the Light: The Book of Pain S1, Ep12  10 Apr. 2018 The Resurrection and the Light: The Book of Pain   8.2 (346)    Rate  Tobias returns to Freeland and is tasked to capture Black Lightning; after a battle of epic proportions, Anissa and Jennifer provide surprising aid.      Shadow of Death: The Book of War S1, Ep13  17 Apr. 2018 Shadow of Death: The Book of War   8.1 (359)    Rate  The aftermath of the showdown with Black Lightning leaves everyone reeling; Tobias gathers his forces.   ";
    let outputString = "";
    for(let i = 0; i < episodeText.length - 4; i++) {
        let year = episodeText.substring(i, i+4);
        if(year === "2017" || year === "2018") {
            let secondSpace = episodeText.lastIndexOf(" ", i-2);
            let firstSpace = episodeText.lastIndexOf(" ", secondSpace-1);
            let day = episodeText.substring(firstSpace+1, secondSpace);
            let month = episodeText.substring(secondSpace+1, i-1);
            outputString += year + convertMonth(month) + convertDay(day) + "<br>";
        }
    }
    return outputString;
}
document.getElementById("demo").innerHTML = myFunction(4, 3);
</script>

</body>
</html>
